<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment Variables Debug</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Environment Variables Debug Page</h1>

    <div class="debug-section">
        <h2>üîß Firebase Environment Variables</h2>
        <div id="firebase-env"></div>
    </div>

    <div class="debug-section">
        <h2>ü§ñ Gemini AI Environment Variables</h2>
        <div id="gemini-env"></div>
    </div>

    <div class="debug-section">
        <h2>üìä All Environment Variables (NEXT_PUBLIC_*)</h2>
        <div id="all-env"></div>
    </div>

    <div class="debug-section">
        <h2>üîç Firebase Config Object</h2>
        <div id="firebase-config"></div>
    </div>

    <script>
        // Note: In Next.js, NEXT_PUBLIC_ env vars are available directly (not via process.env)
        function checkEnvVar(name, displayName) {
            // NEXT_PUBLIC_ vars are injected directly into the window/global scope
            const value = window[name] || globalThis[name];
            if (value) {
                return `<div class="success">‚úÖ ${displayName}: ${value.substring(0, 20)}...</div>`;
            } else {
                return `<div class="error">‚ùå ${displayName}: Not found</div>`;
            }
        }

        function displayResults() {
            // Firebase env vars - these are injected by Next.js during build
            const firebaseEnv = document.getElementById('firebase-env');
            firebaseEnv.innerHTML = `
                ${checkEnvVar('NEXT_PUBLIC_FIREBASE_API_KEY', 'API Key')}
                ${checkEnvVar('NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN', 'Auth Domain')}
                ${checkEnvVar('NEXT_PUBLIC_FIREBASE_PROJECT_ID', 'Project ID')}
                ${checkEnvVar('NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET', 'Storage Bucket')}
                ${checkEnvVar('NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID', 'Messaging Sender ID')}
                ${checkEnvVar('NEXT_PUBLIC_FIREBASE_APP_ID', 'App ID')}
            `;

            // Gemini env vars
            const geminiEnv = document.getElementById('gemini-env');
            geminiEnv.innerHTML = '<div class="warning">‚ö†Ô∏è Gemini API key is server-side only</div>';

            // All NEXT_PUBLIC env vars
            const allEnv = document.getElementById('all-env');
            const nextPublicVars = Object.keys(window)
                .filter(key => key.startsWith('NEXT_PUBLIC_'))
                .map(key => `${key}: ${window[key].substring(0, 20)}...`)
                .join('<br>');

            allEnv.innerHTML = nextPublicVars || '<div class="warning">‚ö†Ô∏è No NEXT_PUBLIC_* variables found in window scope</div>';

            // Firebase config reconstruction
            const firebaseConfig = document.getElementById('firebase-config');
            const config = {
                apiKey: window.NEXT_PUBLIC_FIREBASE_API_KEY,
                authDomain: window.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
                projectId: window.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
                storageBucket: window.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
                messagingSenderId: window.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,
                appId: window.NEXT_PUBLIC_FIREBASE_APP_ID
            };

            firebaseConfig.innerHTML = `<pre>${JSON.stringify(config, null, 2)}</pre>`;
        }

        // Run immediately and retry in case of timing issues
        displayResults();
        setTimeout(displayResults, 1000);
        setTimeout(displayResults, 2000);
    </script>
</body>
</html>
